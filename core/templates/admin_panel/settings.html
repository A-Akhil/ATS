{% extends 'base.html' %}

{% block title %}Scoring Controls{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
	<div class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-3xl shadow-xl px-8 py-10 mb-10">
		<h1 class="text-3xl sm:text-4xl font-bold">Adjust Scoring Strategy</h1>
		<p class="mt-3 text-sm sm:text-base opacity-90">
			Tune the weighting model and profession gating thresholds that power every match result.
			Changes apply to new match attempts immediately.
		</p>
	</div>

	<div class="bg-white rounded-3xl shadow-xl border border-gray-100 p-8">
		<form method="post" class="space-y-8">
			{% csrf_token %}

			{% if form.non_field_errors %}
			<div class="rounded-xl border border-red-200 bg-red-50 px-5 py-4 text-sm text-red-700">
				{{ form.non_field_errors }}
			</div>
			{% endif %}

			<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
				{% for field in form %}
				<div>
					<label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-800 mb-2">
						{{ field.label }}
					</label>
					{{ field }}
					{% if field.help_text %}
					<p class="mt-1 text-xs text-gray-500">{{ field.help_text }}</p>
					{% endif %}
					{% if field.errors %}
					<p class="mt-1 text-xs text-red-600">{{ field.errors|striptags }}</p>
					{% endif %}
				</div>
				{% endfor %}
			</div>

			<div class="rounded-2xl bg-gray-50 border border-gray-200 px-6 py-5 text-sm text-gray-700">
				<p class="font-semibold text-gray-900">Current Weight Summary</p>
				<ul class="mt-2 space-y-1">
					<li>Education Weight: <span class="font-medium">{{ settings.weight_education|floatformat:2 }}</span></li>
					<li>Skills Weight: <span class="font-medium">{{ settings.weight_skills|floatformat:2 }}</span></li>
					<li>Experience Weight: <span class="font-medium">{{ settings.weight_experience|floatformat:2 }}</span></li>
					<li>Profession Zero Threshold: <span class="font-medium">{{ settings.profession_zero_threshold|floatformat:2 }}</span></li>
					<li>Profession Cap Threshold: <span class="font-medium">{{ settings.profession_cap_threshold|floatformat:2 }}</span></li>
					<li>Partial Credit Cap: <span class="font-medium">{{ settings.partial_credit_cap }}</span></li>
				</ul>
			</div>

			<div class="flex flex-wrap gap-3 justify-end">
				<a href="{% url 'admin_panel' %}" class="inline-flex items-center gap-2 px-5 py-2.5 rounded-full border border-gray-200 text-gray-600 hover:bg-gray-100 transition text-sm font-medium">
					<i class="fas fa-arrow-left"></i> Back to Admin Dashboard
				</a>
				<button type="submit" class="inline-flex items-center gap-2 px-6 py-2.5 rounded-full bg-indigo-600 hover:bg-indigo-700 transition text-sm font-semibold text-white shadow">
					<i class="fas fa-save"></i> Save Changes
				</button>
			</div>
		</form>
	</div>
</div>
{% endblock %}
